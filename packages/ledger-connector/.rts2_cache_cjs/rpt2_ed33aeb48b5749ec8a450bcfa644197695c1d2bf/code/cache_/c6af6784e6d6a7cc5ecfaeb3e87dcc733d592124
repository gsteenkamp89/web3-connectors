{"code":"import { AbstractConnector } from '@web3-react/abstract-connector';\r\nimport Web3ProviderEngine from 'web3-provider-engine';\r\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src'; // https://github.com/0xProject/0x-monorepo/issues/1400\r\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger'; // https://github.com/0xProject/0x-monorepo/issues/1400\r\nimport CacheSubprovider from 'web3-provider-engine/subproviders/cache.js';\r\nimport { RPCSubprovider } from '@0x/subproviders/lib/src/subproviders/rpc_subprovider'; // https://github.com/0xProject/0x-monorepo/issues/1400\r\nexport class LedgerConnector extends AbstractConnector {\r\n    constructor({ chainId, url, pollingInterval, requestTimeoutMs, accountFetchingConfigs, baseDerivationPath }) {\r\n        super({ supportedChainIds: [chainId] });\r\n        this.chainId = chainId;\r\n        this.url = url;\r\n        this.pollingInterval = pollingInterval;\r\n        this.requestTimeoutMs = requestTimeoutMs;\r\n        this.accountFetchingConfigs = accountFetchingConfigs;\r\n        this.baseDerivationPath = baseDerivationPath;\r\n    }\r\n    async activate() {\r\n        if (!this.provider) {\r\n            const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval });\r\n            engine.addProvider(new LedgerSubprovider({\r\n                networkId: this.chainId,\r\n                ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\r\n                accountFetchingConfigs: this.accountFetchingConfigs,\r\n                baseDerivationPath: this.baseDerivationPath\r\n            }));\r\n            engine.addProvider(new CacheSubprovider());\r\n            engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs));\r\n            this.provider = engine;\r\n        }\r\n        this.provider.start();\r\n        return { provider: this.provider, chainId: this.chainId };\r\n    }\r\n    async getProvider() {\r\n        return this.provider;\r\n    }\r\n    async getChainId() {\r\n        return this.chainId;\r\n    }\r\n    async getAccount() {\r\n        return this.provider._providers[0].getAccountsAsync(1).then((accounts) => accounts[0]);\r\n    }\r\n    deactivate() {\r\n        this.provider.stop();\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":[],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/index.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,iBAAiB,EAAE,MAAM,gCAAgC,CAAA;AAClE,OAAO,kBAAkB,MAAM,sBAAsB,CAAA;AACrD,OAAO,EAAE,uCAAuC,EAAE,MAAM,0BAA0B,CAAA,CAAC,uDAAuD;AAC1I,OAAO,EAAE,iBAAiB,EAAE,MAAM,8CAA8C,CAAA,CAAC,uDAAuD;AACxI,OAAO,gBAAgB,MAAM,4CAA4C,CAAA;AACzE,OAAO,EAAE,cAAc,EAAE,MAAM,uDAAuD,CAAA,CAAC,uDAAuD;AAW9I,MAAM,OAAO,eAAgB,SAAQ,iBAAiB;IAUpD,YAAY,EACV,OAAO,EACP,GAAG,EACH,eAAe,EACf,gBAAgB,EAChB,sBAAsB,EACtB,kBAAkB,EACO;QACzB,KAAK,CAAC,EAAE,iBAAiB,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;QAEvC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;QACd,IAAI,CAAC,eAAe,GAAG,eAAe,CAAA;QACtC,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAA;QACxC,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAA;QACpD,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAA;IAC9C,CAAC;IAEM,KAAK,CAAC,QAAQ;QACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,MAAM,MAAM,GAAG,IAAI,kBAAkB,CAAC,EAAE,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAA;YAChF,MAAM,CAAC,WAAW,CAChB,IAAI,iBAAiB,CAAC;gBACpB,SAAS,EAAE,IAAI,CAAC,OAAO;gBACvB,gCAAgC,EAAE,uCAAuC;gBACzE,sBAAsB,EAAE,IAAI,CAAC,sBAAsB;gBACnD,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;aAC5C,CAAC,CACH,CAAA;YACD,MAAM,CAAC,WAAW,CAAC,IAAI,gBAAgB,EAAE,CAAC,CAAA;YAC1C,MAAM,CAAC,WAAW,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAA;YACvE,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAA;SACvB;QAED,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAA;QAErB,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAA;IAC3D,CAAC;IAEM,KAAK,CAAC,WAAW;QACtB,OAAO,IAAI,CAAC,QAAQ,CAAA;IACtB,CAAC;IAEM,KAAK,CAAC,UAAU;QACrB,OAAO,IAAI,CAAC,OAAO,CAAA;IACrB,CAAC;IAEM,KAAK,CAAC,UAAU;QACrB,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,QAAkB,EAAU,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;IAC1G,CAAC;IAEM,UAAU;QACf,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAA;IACtB,CAAC;CACF\"}","dts":{"name":"/Users/gerhardsteenkamp/Desktop/linumlabs/web3-react/packages/ledger-connector/src/index.d.ts","writeByteOrderMark":false,"text":"import { ConnectorUpdate } from '@web3-react/types';\r\nimport { AbstractConnector } from '@web3-react/abstract-connector';\r\nimport Web3ProviderEngine from 'web3-provider-engine';\r\ninterface LedgerConnectorArguments {\r\n    chainId: number;\r\n    url: string;\r\n    pollingInterval?: number;\r\n    requestTimeoutMs?: number;\r\n    accountFetchingConfigs?: any;\r\n    baseDerivationPath?: string;\r\n}\r\nexport declare class LedgerConnector extends AbstractConnector {\r\n    private readonly chainId;\r\n    private readonly url;\r\n    private readonly pollingInterval?;\r\n    private readonly requestTimeoutMs?;\r\n    private readonly accountFetchingConfigs?;\r\n    private readonly baseDerivationPath?;\r\n    private provider;\r\n    constructor({ chainId, url, pollingInterval, requestTimeoutMs, accountFetchingConfigs, baseDerivationPath }: LedgerConnectorArguments);\r\n    activate(): Promise<ConnectorUpdate>;\r\n    getProvider(): Promise<Web3ProviderEngine>;\r\n    getChainId(): Promise<number>;\r\n    getAccount(): Promise<null>;\r\n    deactivate(): void;\r\n}\r\nexport {};\r\n"}}
